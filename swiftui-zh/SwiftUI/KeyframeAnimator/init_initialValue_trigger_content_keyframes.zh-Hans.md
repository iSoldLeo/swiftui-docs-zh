---
source: https://developer.apple.com/documentation/SwiftUI/KeyframeAnimator/init(initialValue:trigger:content:keyframes:)
抓取时间：2025-12-01T10:31:29Z
---

# init(initialValue:trigger:content:keyframes:)

**Initializer**

当给定的触发器值发生变化时播放给定的关键帧，并使用在 `body` 中应用的修改器更新视图。

### 声明

```swift
init(initialValue: Value, trigger: some Equatable, @ViewBuilder content: @escaping (Value) -> Content, @KeyframesBuilder<Value> keyframes: @escaping (Value) -> KeyframePath)
```

## 参数

- **initialValue**：关键帧动画的初始值。
- **trigger**：用于观察变化的值。
- **content**：视图生成器闭包，将关键帧生成的插值作为其单个参数。
- **keyframes**：定义数值随时间变化的关键帧。动画的当前值是单一参数，在视图首次出现时等于`initialValue`，然后在后续调用中等于上一个关键帧动画的结束值。

## 讨论

请注意，`content` 闭包将在每一帧动画中更新，因此请避免直接在`content` 中执行任何昂贵的操作。

如果触发值在动画过程中发生变化，`keyframes` 闭包将以当前的内插值被调用，您返回的关键帧将定义一个新的动画，取代旧的动画。之前的速度将被保留，因此如果没有指定自定义的初始速度，立方体或弹簧关键帧将保持与之前动画的连续性。

当关键帧动画结束时，动画师将保留结束值，该值将成为下一个动画的初始值。

## 创建相位动画

- **init(initialValue:repeating:content:keyframes:)**：连续循环给定的关键帧，使用在 `body` 中应用的修改器更新视图。


---
source: https://developer.apple.com/documentation/SwiftUI/KeyframeAnimator/init(initialValue:trigger:content:keyframes:)
crawled: 2025-12-01T10:31:29Z
---

# init(initialValue:trigger:content:keyframes:)

**Initializer**

Plays the given keyframes when the given trigger value changes, updating the view using the modifiers you apply in `body`.

## Declaration

```swift
init(initialValue: Value, trigger: some Equatable, @ViewBuilder content: @escaping (Value) -> Content, @KeyframesBuilder<Value> keyframes: @escaping (Value) -> KeyframePath)
```

## Parameters

- **initialValue**: The initial value that the keyframes will animate from.
- **trigger**: A value to observe for changes.
- **content**: A view builder closure that takes the interpolated value generated by the keyframes as its single argument.
- **keyframes**: Keyframes defining how the value changes over time. The current value of the animator is the single argument, which is equal to `initialValue` when the view first appears, then is equal to the end value of the previous keyframe animation on subsequent calls.

## Discussion

Note that the `content` closure will be updated on every frame while animating, so avoid performing any expensive operations directly within `content`.

If the trigger value changes while animating, the `keyframes` closure will be called with the current interpolated value, and the keyframes that you return define a new animation that replaces the old one. The previous velocity will be preserved, so cubic or spring keyframes will maintain continuity from the previous animation if they do not specify a custom initial velocity.

When a keyframe animation finishes, the animator will remain at the end value, which becomes the initial value for the next animation.

## Creating a phase animator

- **init(initialValue:repeating:content:keyframes:)**: Loops the given keyframes continuously, updating the view using the modifiers you apply in `body`.

